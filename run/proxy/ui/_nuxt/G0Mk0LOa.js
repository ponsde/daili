import{$ as e,A as t,At as n,B as r,D as i,G as a,J as o,K as s,N as c,Ot as l,P as u,Pt as d,R as f,U as p,V as m,W as h,X as g,Y as _,Z as v,dt as y,et as b,ht as x,jt as S,kt as C,lt as w,mt as T,nt as E,q as D,st as O,tt as k,ut as A,x as ee,xt as j,z as M}from"./CZEqKmNR.js";import{d as N,p as P}from"./-erqxIKx.js";import{t as F}from"./CleNlDm1.js";import"./CFrntjUg.js";import{a as te,i as I,n as L,o as ne,r as R,t as re}from"./T0JuswmA.js";import{B as ie,W as z,c as ae,d as oe,g as B,j as V,o as H,r as U}from"./Cycs7SVw.js";import{t as W}from"./BLNk-Hhf.js";import{_ as G,c as K,d as q,f as J,i as Y,m as X,p as se,s as ce,u as Z}from"./DA8czWsK.js";import{n as le,t as ue}from"./ChdGwI1C.js";import{c as de,f as fe,h as pe,n as me,r as he,s as ge,t as _e,u as ve}from"./DE8gTX9W.js";import{t as Q}from"./D5bKNMWo.js";import{t as ye}from"./DO-f6TPk.js";import{t as be}from"./dYIMhUN5.js";import{t as xe}from"./CMuLFDHw.js";const $=u(`proxies`,()=>{let e=F(),t=le(),n=j([]),r=j([]),a=j({}),o=j({}),s=j({}),c=j({}),l=j({}),u=j({}),d=j(!1),f=i(`collapsedMap`,{}),p=(t,n=!0)=>{let r=t.extra||{},i=Object.keys(r).reduce((t,n)=>{let i=r[n],a=i?.history?.at(-1)?.delay??e.latencyQualityMap.NOT_CONNECTED;return t.allTestUrlLatency[n]=a,t.allTestUrlLatencyHistory[n]=i?.history,t},{allTestUrlLatency:{},allTestUrlLatencyHistory:{}});if(n){let n=t.testUrl||e.urlForLatencyTest;if(!(n in i.allTestUrlLatency)){let r=t.history?.at(-1)?.delay??e.latencyQualityMap.NOT_CONNECTED;i.allTestUrlLatency[n]=r,i.allTestUrlLatencyHistory[n]=t.history}}return i},m=e=>{let t={...o.value},n={...a.value};e.forEach(e=>{let{allTestUrlLatency:r,allTestUrlLatencyHistory:i}=p(e),{udp:a,xudp:o,type:s,now:c,name:l,tfo:u,provider:d=``}=e;t[e.name]={udp:a,xudp:o,type:s,latency:c,latencyTestHistory:i,name:l,tfo:u,provider:d},n[e.name]=r}),o.value=t,a.value=n},h=async()=>{let[{providers:e},{proxies:t}]=await Promise.all([K(),ce()]),i=Object.values(t).map(t=>{if(t.all?.length&&!t.testUrl){let{testUrl:n,timeout:r}=e?.[t.name]||{};return{...t,testUrl:n,timeout:r}}return t}),a=[...t.GLOBAL?.all??[],`GLOBAL`],o=Object.values(i).filter(e=>e.all?.length).sort((e,t)=>a.indexOf(e.name)-a.indexOf(t.name)),s=Object.values(e).filter(e=>e.name!==`default`&&e.vehicleType!==`Compatible`),c=[...i,...s.flatMap(e=>e.proxies.filter(e=>!(e.name in t)).map(t=>({...t,provider:e.name})))];n.value=o,r.value=s,m(c)},g=async(n,r)=>{if(await se(n.name,r),await h(),e.autoCloseConns){let e=t.restructRawMsgToConnection(t.latestConnectionMsg?.connections??[],[]);e.length>0&&e.forEach(({id:e,chains:t})=>{t.includes(n.name)&&Y(e)})}},_=e=>{let t=o.value[e];if(!e||!t)return e;for(;t&&t.latency&&t.latency!==t.name;){let e=o.value[t.latency];if(!e)return t.name;t=e}return t?.name??e};return{proxies:n,proxyProviders:r,latencyMap:a,proxyNodeMap:o,proxyLatencyTestingMap:s,proxyGroupLatencyTestingMap:c,proxyProviderLatencyTestingMap:l,updatingMap:u,isAllProviderUpdating:d,collapsedMap:f,fetchProxies:h,selectProxyInGroup:g,getNowProxyNodeName:_,getLatencyByName:(t,n)=>{let r=n||e.urlForLatencyTest,i=a.value,o=_(t),s=i[o]?.[r],c=i[t]?.[r];if(s!=null)return s;if(c!=null)return c;let l=i[o];if(l&&Object.keys(l).length>0){let e=Object.keys(l),t=l[r]==null?e[0]:r;if(t)return l[t]}let u=i[t];if(u&&Object.keys(u).length>0){let e=Object.keys(u);if(e[0])return u[e[0]]}return e.latencyQualityMap.NOT_CONNECTED},getLatencyHistoryByName:(t,n)=>{let r=o.value[t],i=_(t),a=o.value[i],s=n||e.urlForLatencyTest,c=a?.latencyTestHistory[s]||r?.latencyTestHistory[s];if(c&&c.length)return c;let l=a?.latencyTestHistory||{},u=Object.keys(l)[0];if(u){let e=l[u];if(e&&e.length)return e}let d=r?.latencyTestHistory||{},f=Object.keys(d)[0];if(f){let e=d[f];if(e&&e.length)return e}return[]},isProxyGroup:e=>{let t=o.value[e];return t?[`direct`,`reject`,`loadbalance`].includes(t.type.toLowerCase())||!!t.latency:!1},proxyLatencyTest:async(t,n,r,i)=>{let o=_(t);s.value[o]=!0;try{let t=r||e.urlForLatencyTest,s=a.value?.[o]||{},{delay:c}=await q(o,n,t,i??e.latencyTestTimeoutDuration);s[t]=c,a.value={...a.value,[o]:s}}catch{let t=r||e.urlForLatencyTest,n=a.value?.[o]||{};n[t]=e.latencyQualityMap.NOT_CONNECTED,a.value={...a.value,[o]:n}}finally{s.value[o]=!1}},proxyGroupLatencyTest:async t=>{c.value[t]=!0;try{let r=n.value.find(e=>e.name===t);await Z(t,r?.testUrl||e.urlForLatencyTest,r?.timeout??e.latencyTestTimeoutDuration),await h()}finally{c.value[t]=!1}},updateProviderByProviderName:async e=>{u.value[e]=!0;try{await X(e)}catch{}await h(),u.value[e]=!1},updateAllProvider:async()=>{d.value=!0;try{await Promise.allSettled(r.value.map(e=>X(e.name))),await h()}finally{d.value=!1}},proxyProviderLatencyTest:async e=>{l.value[e]=!0;try{await J(e),await h()}finally{l.value[e]=!1}}}});var Se={key:0,class:`h-4 w-4 animate-spin rounded-full border-2 border-current/30 border-t-current`},Ce=k({__name:`Latency`,props:{proxyName:{},testUrl:{},class:{}},emits:[`click`],setup(t){let n=t,r=$(),i=F(),a=s(()=>n.class||``),o=s(()=>r.getLatencyByName(n.proxyName,n.testUrl)),c=s(()=>r.proxyLatencyTestingMap[n.proxyName]||!1),u=s(()=>ve(o.value,i.latencyQualityMap)),d=s(()=>o.value||`---`);return(t,n)=>(w(),g(`span`,{class:C([`flex w-11 cursor-pointer items-center justify-center rounded-md px-1.5 py-1 text-xs font-semibold whitespace-nowrap transition-all duration-200 ease-in-out hover:scale-105`,[l(u),l(a)]]),onClick:n[0]||=e=>t.$emit(`click`,e)},[l(c)?(w(),g(`span`,Se)):(w(),g(h,{key:1},[e(S(l(d)),1)],64))],2))}}),we=Object.assign(Ce,{__name:`Latency`}),Te={class:`flex items-center gap-2`},Ee={class:`my-1 flex flex-1 items-center justify-center overflow-hidden rounded-2xl`},De=k({__name:`ProxyPreviewBar`,props:{proxyNameList:{},testUrl:{},now:{}},setup(e){let t=e,r=$(),i=F(),a=s(()=>t.proxyNameList.map(e=>r.getLatencyByName(e,t.testUrl))),c=s(()=>a.value.length||1),u=s(()=>a.value.filter(e=>e>i.latencyQualityMap.NOT_CONNECTED&&e<=i.latencyQualityMap.MEDIUM).length),d=s(()=>a.value.filter(e=>e>i.latencyQualityMap.MEDIUM&&e<=i.latencyQualityMap.HIGH).length),f=s(()=>a.value.filter(e=>e>i.latencyQualityMap.HIGH).length),p=s(()=>a.value.filter(e=>e===i.latencyQualityMap.NOT_CONNECTED).length),m=s(()=>u.value*100/c.value),h=s(()=>d.value*100/c.value),v=s(()=>f.value*100/c.value),y=s(()=>p.value*100/c.value);return(t,r)=>{let i=we;return w(),g(`div`,Te,[D(`div`,Ee,[D(`div`,{class:`h-2 bg-green-600`,style:n({width:`${l(m)}%`})},null,4),D(`div`,{class:`h-2 bg-yellow-500`,style:n({width:`${l(h)}%`})},null,4),D(`div`,{class:`h-2 bg-red-500`,style:n({width:`${l(v)}%`})},null,4),D(`div`,{class:`h-2 bg-[var(--color-neutral)]`,style:n({width:`${l(y)}%`})},null,4)]),e.now?(w(),o(i,{key:0,"proxy-name":e.now,"test-url":e.testUrl},null,8,[`proxy-name`,`test-url`])):_(``,!0)])}}}),Oe=Object.assign(De,{__name:`ProxyPreviewBar`}),ke={class:`flex items-center gap-2`},Ae={class:`flex flex-1 flex-wrap items-center gap-1`},je=[`title`,`onClick`],Me=k({__name:`ProxyPreviewDots`,props:{proxyNameList:{},testUrl:{},now:{},onSelect:{type:Function}},setup(e){let t=e,n=$(),r=F(),i=s(()=>t.proxyNameList.map(e=>[e,n.getLatencyByName(e,t.testUrl)]));function a(e,t){let n=r.latencyQualityMap.NOT_CONNECTED,i=r.latencyQualityMap.MEDIUM,a=r.latencyQualityMap.HIGH;return typeof e!=`number`||e===n?t?`dot-neutral-selected`:`dot-neutral`:e>a?t?`dot-slow-selected`:`dot-slow`:e>i?t?`dot-medium-selected`:`dot-medium`:t?`dot-good-selected`:`dot-good`}return(t,n)=>{let r=we;return w(),g(`div`,ke,[D(`div`,Ae,[(w(!0),g(h,null,A(l(i),([t,n])=>(w(),g(`div`,{key:t,class:C([`size-4 rounded-full transition-transform duration-200 ease-out`,[a(n,t===e.now),e.onSelect&&`cursor-pointer hover:scale-125`]]),title:t,onClick:p(n=>e.onSelect&&e.onSelect(t),[`stop`])},null,10,je))),128))]),e.now?(w(),o(r,{key:0,"proxy-name":e.now,"test-url":e.testUrl},null,8,[`proxy-name`,`test-url`])):_(``,!0)])}}}),Ne=Object.assign(W(Me,[[`__scopeId`,`data-v-476aafa9`]]),{__name:`ProxyPreviewDots`}),Pe=k({__name:`ProxyNodePreview`,props:{proxyNameList:{},testUrl:{},now:{},onSelect:{type:Function}},setup(e){let t=e,n=F(),r=s(()=>n.proxiesPreviewType===P.OFF),i=s(()=>t.proxyNameList.length<=10),a=s(()=>{let e=n.proxiesPreviewType;return e===P.BAR||e===P.Auto&&!i.value}),c=s(()=>{let e=n.proxiesPreviewType;return e===P.DOTS||e===P.Auto&&i.value});return(t,n)=>{let i=Oe,s=Ne;return l(r)?_(``,!0):(w(),g(h,{key:0},[l(a)?(w(),o(i,{key:0,"proxy-name-list":e.proxyNameList,"test-url":e.testUrl,now:e.now},null,8,[`proxy-name-list`,`test-url`,`now`])):l(c)?(w(),o(s,{key:1,"proxy-name-list":e.proxyNameList,"test-url":e.testUrl,now:e.now,"on-select":e.onSelect},null,8,[`proxy-name-list`,`test-url`,`now`,`on-select`])):_(``,!0)],64))}}}),Fe=Object.assign(Pe,{__name:`ProxyNodePreview`}),Ie=d(pe(),1),Le={class:`min-w-0 flex-1 truncate text-sm font-medium`},Re={key:1,class:`shrink-0 rounded bg-info px-1.5 py-0.5 text-[0.625rem] font-semibold text-info-content`},ze={key:2,class:`hidden text-xs uppercase opacity-60 sm:inline`},Be={class:`hidden text-xs uppercase opacity-75 sm:inline`},Ve={class:`flex flex-col items-center gap-2`},He={class:`text-lg font-bold`},Ue={key:0,class:`w-full text-xs uppercase`},We={key:1,class:`flex max-h-60 w-full flex-col gap-2 overflow-y-auto`},Ge={class:`flex flex-col gap-1`},Ke={class:`text-sm italic`},qe={key:2,class:`text-sm opacity-75`},Je=k({__name:`ProxyNodeListItem`,props:{proxyName:{},testUrl:{},timeout:{},isSelected:{type:Boolean,default:!1}},emits:[`click`],setup(e,{emit:t}){let r=e,i=t,c=$(),u=F(),{t:d}=ee(),m=s(()=>c.proxyNodeMap[r.proxyName]),v=s(()=>ge(m.value?.type||``,d)),y=s(()=>m.value?.xudp||m.value?.udp),x=s(()=>c.proxyLatencyTestingMap[r.proxyName]||!1),E=s(()=>!m.value||!he(m.value.type)?null:[m.value.xudp&&`xudp`,m.value.udp&&`udp`,m.value.tfo&&`TFO`].filter(Boolean).join(` / `)),O=s(()=>c.getLatencyHistoryByName(r.proxyName,r.testUrl).toReversed()),k=j(null),M=j(null),N=j(null),P=j(!1),{floatingStyles:ie,middlewareData:z,placement:ae}=L(k,M,{placement:`top`,middleware:[te(10),I(),ne({padding:8}),re({element:N})],whileElementsMounted:R}),oe=s(()=>{let e=z.value.arrow,t={top:`bottom`,right:`left`,bottom:`top`,left:`right`}[ae.value.split(`-`)[0]||`top`]||`bottom`;return{left:e?.x==null?``:`${e.x}px`,top:e?.y==null?``:`${e.y}px`,[t]:`-4px`}}),B=null,V=null;function H(){B&&=(clearTimeout(B),null),V&&=(clearTimeout(V),null)}function W(){H(),B=setTimeout(()=>{P.value=!0},300)}function G(){H(),V=setTimeout(()=>{P.value=!1},100)}function K(){H()}function q(){H(),P.value=!1}function J(){i(`click`)}function Y(){c.proxyLatencyTest(r.proxyName,m.value?.provider||``,r.testUrl,r.timeout)}return(t,r)=>{let i=we;return w(),g(`div`,{class:C([`relative z-0`,e.isSelected?`z-10`:``])},[D(`div`,{ref_key:`reference`,ref:k,class:C([`relative rounded-lg transition-all duration-300`,e.isSelected?`animate-glow-pulse bg-primary text-primary-content`:`bg-neutral text-neutral-content hover:shadow-md`]),onMouseenter:W,onMouseleave:G},[D(`div`,{class:C([`flex items-center gap-2 px-3 py-1.5`,{"cursor-pointer hover:opacity-80":!!J}]),onClick:J},[e.isSelected?(w(),o(l(U),{key:0,class:`size-4 shrink-0`})):_(``,!0),D(`span`,Le,S(e.proxyName),1),l(y)?(w(),g(`span`,Re,`U`)):_(``,!0),l(E)?(w(),g(`span`,ze,S(l(E)),1)):_(``,!0),D(`span`,Be,S(l(v)),1),b(i,{"proxy-name":e.proxyName,"test-url":e.testUrl,class:C([`shrink-0`,{"animate-pulse":l(x)}]),onClick:p(Y,[`stop`])},null,8,[`proxy-name`,`test-url`,`class`])],2),(w(),o(a,{to:`body`},[b(f,{"enter-active-class":`transition-all duration-200 ease-out`,"leave-active-class":`transition-all duration-150 ease-in`,"enter-from-class":`opacity-0 scale-95`,"leave-to-class":`opacity-0 scale-95`},{default:T(()=>[l(P)?(w(),g(`div`,{key:0,ref_key:`floating`,ref:M,style:n(l(ie)),class:`z-50 w-max max-w-80 rounded-xl bg-primary p-2.5 text-primary-content shadow-lg`,onMouseenter:K,onMouseleave:q},[D(`div`,{ref_key:`floatingArrow`,ref:N,class:`absolute size-2 rotate-45 bg-primary`,style:n(l(oe))},null,4),D(`div`,Ve,[D(`h2`,He,S(e.proxyName),1),l(E)?(w(),g(`div`,Ue,` (`+S(l(E))+`) `,1)):_(``,!0),l(O).length>0?(w(),g(`div`,We,[(w(!0),g(h,null,A(l(O),(e,t)=>(w(),g(`div`,{key:t,class:`flex items-start gap-2`},[r[0]||=D(`div`,{class:`mt-1.5 size-2 rounded-full bg-current opacity-50`},null,-1),D(`div`,Ge,[D(`time`,Ke,S(l(Ie.default)(e.time).format(`YYYY-MM-DD HH:mm:ss`)),1),D(`div`,{class:C([`inline-block rounded px-2 py-0.5 text-xs`,l(ve)(e.delay,l(u).latencyQualityMap)])},S(e.delay||`---`),3)])]))),128))])):(w(),g(`div`,qe,S(l(d)(`noLatencyHistory`)),1))])],36)):_(``,!0)]),_:1})]))],34)],2)}}}),Ye=Object.assign(Je,{__name:`ProxyNodeListItem`});const Xe={latency:50,stability:30,successRate:20},Ze={good:80,medium:50};function Qe(e){let t=e.filter(e=>e!==null&&e>0);if(t.length===0)return 0;let n=t.reduce((e,t)=>e+t,0)/t.length;if(n<=50)return 100;if(n>=5e3)return 0;let r=Math.log(50),i=Math.log(5e3),a=Math.log(n);return Math.round(100*(1-(a-r)/(i-r)))}function $e(e){let t=e.filter(e=>e!==null&&e>0);if(t.length<2)return 50;let n=t.reduce((e,t)=>e+t,0)/t.length,r=t.map(e=>(e-n)**2).reduce((e,t)=>e+t,0)/t.length,i=Math.sqrt(r)/n;return i<=.1?100:i>=.5?0:Math.round(100*(1-(i-.1)/.4))}function et(e){if(e.length===0)return 0;let t=e.filter(e=>e.success).length;return Math.round(t/e.length*100)}function tt(e,t=Xe){if(e.history.length===0)return 0;let n=e.history.map(e=>e.latency),r=Qe(n),i=$e(n),a=et(e.history),o=t.latency+t.stability+t.successRate,s=t.latency/o,c=t.stability/o,l=t.successRate/o,u=r*s+i*c+a*l;return Math.round(u)}function nt(e){return e>=Ze.good?`text-success`:e>=Ze.medium?`text-warning`:`text-error`}function rt(e){let t=Math.floor((Date.now()-e)/1e3);return t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}function it(e,t,n,r=Xe){let i=null,a=-1;for(let o of e){if(n.includes(o))continue;let e=t.get(o);if(!e||e.history.length===0)continue;let s=tt(e,r);s>a&&(a=s,i=o)}return i}var at=d(pe(),1),ot={key:0,class:`absolute -top-1 -right-1 z-1 flex size-4 items-center justify-center rounded-full bg-info text-[0.625rem] font-bold text-info-content`},st=[`title`],ct={class:`m-0 line-clamp-1 text-start text-sm leading-tight font-semibold break-all`},lt={class:`flex items-end justify-between gap-1`},ut={class:`flex flex-col gap-0.5`},dt={class:`text-xs font-semibold uppercase opacity-75`},ft={key:0,class:`flex items-center gap-1 text-[0.625rem]`},pt={key:0,class:`opacity-50`},mt={class:`flex flex-col items-center gap-2`},ht={class:`m-0 text-lg font-bold`},gt={key:0,class:`w-full text-center text-xs uppercase opacity-80`},_t={key:1,class:`w-full rounded-lg bg-[color-mix(in_oklch,var(--color-primary-content)_10%,transparent)] p-2`},vt={class:`mb-1 flex items-center justify-between text-[0.625rem] opacity-70`},yt={viewBox:`0 0 100 50`,class:`h-8 w-full`,preserveAspectRatio:`none`},bt=[`d`],xt=[`cx`,`cy`],St={key:2,class:`m-0 max-h-60 w-full list-none overflow-y-auto p-0`},Ct={class:`flex items-start gap-2 border-b border-[color-mix(in_oklch,var(--color-primary-content)_15%,transparent)] py-1.5 last:border-b-0`},wt={class:`shrink-0 opacity-80`},Tt={class:`flex min-w-0 flex-col gap-1`},Et={class:`text-xs italic opacity-80`},Dt={key:3,class:`text-center text-sm opacity-75`},Ot=k({__name:`ProxyNodeCard`,props:{proxyName:{},testUrl:{},timeout:{},isSelected:{type:Boolean,default:!1},isRecommended:{type:Boolean,default:!1},providerName:{default:``},groupName:{default:``}},emits:[`click`],setup(e,{emit:t}){let r=e,i=t,c=$(),u=F(),d=ye(),{t:m}=ee(),v=s(()=>c.proxyNodeMap[r.proxyName]),y=s(()=>ge(v.value?.type||``,m)),x=s(()=>v.value?.xudp||v.value?.udp),E=s(()=>d.getNodePerformance(r.proxyName)),O=s(()=>{let e=E.value;return!e||e.history.length===0?null:tt(e,d.scoringWeights)}),k=s(()=>{let e=E.value;return e?rt(e.lastTestTime):null}),M=s(()=>{let e=E.value;if(!e||e.history.length<2)return null;let t=e.history.filter(e=>e.success&&e.latency!==null).map(e=>e.latency).slice(0,10).reverse();if(t.length<2)return null;let n=Math.min(...t),r=Math.max(...t),i=r-n||1;return{points:t.map((e,r)=>({x:r/(t.length-1)*100,y:100-(e-n)/i*80-10})),min:n,max:r,avg:Math.round(t.reduce((e,t)=>e+t,0)/t.length)}}),N=s(()=>{if(!M.value)return``;let{points:e}=M.value;return e.map((e,t)=>`${t===0?`M`:`L`} ${e.x} ${e.y}`).join(` `)}),P=s(()=>O.value===null?``:nt(O.value)),ie=s(()=>r.providerName&&c.proxyProviderLatencyTestingMap[r.providerName]||!1),z=s(()=>r.groupName&&c.proxyGroupLatencyTestingMap[r.groupName]||!1),oe=s(()=>c.proxyLatencyTestingMap[r.proxyName]||ie.value||z.value),B=s(()=>he(v.value?.type)?`(${[v.value?.xudp&&`xudp`,v.value?.udp&&`udp`,v.value?.tfo&&`TFO`].filter(Boolean).join(` / `)})`:null),V=s(()=>c.getLatencyHistoryByName(r.proxyName,r.testUrl).toReversed()),H=j(null),W=j(null),G=j(null),K=j(!1),{floatingStyles:q,middlewareData:J,placement:Y}=L(H,W,{placement:`top`,middleware:[te(10),I(),ne({padding:8}),re({element:G})],whileElementsMounted:R}),X=s(()=>{let e=J.value.arrow,t={top:`bottom`,right:`left`,bottom:`top`,left:`right`}[Y.value.split(`-`)[0]||`top`]||`bottom`;return{left:e?.x==null?``:`${e.x}px`,top:e?.y==null?``:`${e.y}px`,[t]:`-4px`}}),se=null,ce=null;function Z(){se&&=(clearTimeout(se),null),ce&&=(clearTimeout(ce),null)}function le(){Z(),se=setTimeout(()=>{K.value=!0},300)}function ue(){Z(),ce=setTimeout(()=>{K.value=!1},100)}function de(){Z()}function fe(){Z(),K.value=!1}function pe(){i(`click`)}function me(){c.proxyLatencyTest(r.proxyName,v.value?.provider||``,r.testUrl,r.timeout)}return(t,r)=>{let i=we;return w(),g(`div`,{class:C([`relative p-1`,e.isSelected?`z-10`:`z-0`])},[D(`div`,{ref_key:`reference`,ref:H,class:C([`relative w-full rounded-[0.625rem] transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]`,[e.isSelected?`scale-[1.02] animate-[glowPulse_2s_ease-in-out_infinite] bg-primary text-primary-content`:`bg-neutral text-neutral-content hover:scale-[1.01] hover:shadow-[0_4px_12px_color-mix(in_oklch,var(--color-base-content)_15%,transparent)]`,l(oe)?`animate-[testingPulse_1.5s_ease-in-out_infinite] border border-[color-mix(in_oklch,var(--color-success)_50%,transparent)]`:``]]),onMouseenter:le,onMouseleave:ue},[l(x)?(w(),g(`div`,ot,` U `)):_(``,!0),e.isRecommended?(w(),g(`div`,{key:1,class:`absolute -top-1 -left-1 z-1 flex size-4 items-center justify-center rounded-full bg-warning text-warning-content`,title:l(m)(`recommendation.recommended`,`Recommended`)},[b(l(ae),{class:`size-3`})],8,st)):_(``,!0),D(`div`,{class:C([`flex flex-col gap-2 p-[0.625rem]`,{"cursor-pointer":!!pe}]),onClick:pe},[D(`h2`,ct,S(e.proxyName),1),D(`div`,lt,[D(`div`,ut,[D(`div`,dt,S(l(y)),1),l(O)===null?_(``,!0):(w(),g(`div`,ft,[D(`span`,{class:C([l(P),`font-bold`])},S(l(O)),3),l(k)?(w(),g(`span`,pt,S(l(k)),1)):_(``,!0)]))]),b(i,{"proxy-name":e.proxyName,"test-url":e.testUrl,class:C({"animate-pulse":l(oe)}),onClick:p(me,[`stop`])},null,8,[`proxy-name`,`test-url`,`class`])])],2),(w(),o(a,{to:`body`},[b(f,{name:`proxy-tooltip`},{default:T(()=>[l(K)?(w(),g(`div`,{key:0,ref_key:`floating`,ref:W,style:n(l(q)),class:`z-50 w-max max-w-80 rounded-xl bg-primary p-3 text-primary-content shadow-[0_10px_40px_color-mix(in_oklch,var(--color-base-content)_30%,transparent)]`,onMouseenter:de,onMouseleave:fe},[D(`div`,{ref_key:`floatingArrow`,ref:G,class:`absolute size-2 rotate-45 bg-primary`,style:n(l(X))},null,4),D(`div`,mt,[D(`h2`,ht,S(e.proxyName),1),l(B)?(w(),g(`div`,gt,S(l(B)),1)):_(``,!0),l(M)?(w(),g(`div`,_t,[D(`div`,vt,[D(`span`,null,S(l(M).min)+`ms`,1),D(`span`,null,`avg: `+S(l(M).avg)+`ms`,1),D(`span`,null,S(l(M).max)+`ms`,1)]),(w(),g(`svg`,yt,[r[0]||=D(`line`,{x1:`0`,y1:`25`,x2:`100`,y2:`25`,stroke:`currentColor`,"stroke-opacity":`0.1`,"stroke-dasharray":`2,2`},null,-1),D(`path`,{d:l(N),fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:`opacity-80`},null,8,bt),(w(!0),g(h,null,A(l(M).points,(e,t)=>(w(),g(`circle`,{key:t,cx:e.x,cy:e.y,r:`2`,fill:`currentColor`,class:`opacity-60`},null,8,xt))),128))]))])):_(``,!0),l(V).length>0?(w(),g(`ul`,St,[(w(!0),g(h,null,A(l(V),(e,t)=>(w(),g(`li`,{key:t},[D(`div`,Ct,[D(`div`,wt,[b(l(U),{class:`size-4`})]),D(`div`,Tt,[D(`time`,Et,S(l(at.default)(e.time).format(`YYYY-MM-DD HH:mm:ss`)),1),D(`div`,{class:C([`inline-block rounded-full px-2 py-0.5 text-xs font-semibold`,l(ve)(e.delay,l(u).latencyQualityMap)])},S(e.delay||`---`),3)])])]))),128))])):(w(),g(`div`,Dt,S(l(m)(`noLatencyHistory`)),1))])],36)):_(``,!0)]),_:1})]))],34)],2)}}}),kt=Object.assign(Ot,{__name:`ProxyNodeCard`}),At=d(pe(),1),jt={class:`flex items-center gap-2 pt-1`},Mt={class:`h-2 flex-1 overflow-hidden rounded-full`,style:{background:`color-mix(
            in oklch,
            var(--color-base-content) 15%,
            transparent
          )`}},Nt={class:`flex items-center justify-center rounded-full px-2 py-0.5 text-xs font-semibold`,style:{background:`var(--color-secondary)`,color:`var(--color-secondary-content)`}},Pt={class:`mt-1.5 flex flex-wrap items-center justify-between gap-2`},Ft={class:`text-sm`,style:{color:`color-mix(
            in oklch,
            var(--color-base-content) 60%,
            transparent
          )`}},It={class:`text-sm`,style:{color:`color-mix(
            in oklch,
            var(--color-base-content) 60%,
            transparent
          )`}},Lt=k({__name:`SubscriptionInfo`,props:{subscriptionInfo:{}},setup(e){let t=e,{t:r}=ee(),i=s(()=>t.subscriptionInfo?ue(t.subscriptionInfo.Total||0,{units:`iec`}).toString():`0 B`),a=s(()=>{if(!t.subscriptionInfo)return`0 B`;let{Download:e=0,Upload:n=0}=t.subscriptionInfo;return ue(e+n,{units:`iec`}).toString()}),o=s(()=>{if(!t.subscriptionInfo?.Total)return 0;let{Download:e=0,Upload:n=0,Total:r=1}=t.subscriptionInfo;return Math.min(Number(((e+n)/r*100).toFixed(1)),999)}),c=s(()=>t.subscriptionInfo?.Expire?(0,At.default)(t.subscriptionInfo.Expire*1e3).format(`YYYY-MM-DD`):r(`noExpire`));return(t,s)=>e.subscriptionInfo?(w(),g(h,{key:0},[D(`div`,jt,[D(`div`,Mt,[D(`div`,{class:`h-full rounded-full transition-[width] duration-500 ease-out`,style:n({width:`${l(o)}%`,background:`linear-gradient(90deg, var(--color-primary), var(--color-secondary))`})},null,4)]),D(`div`,Nt,S(l(o))+`% `,1)]),D(`div`,Pt,[D(`div`,Ft,S(l(a))+` / `+S(l(i)),1),D(`div`,It,S(l(r)(`expire`))+`: `+S(l(c)),1)])],64)):_(``,!0)}}),Rt=Object.assign(Lt,{__name:`SubscriptionInfo`}),zt={class:`overflow-hidden rounded-xl transition-[background,border-color] duration-200 ease-out select-none hover:border-[color-mix(in_oklch,var(--color-primary)_40%,transparent)] hover:bg-[color-mix(in_oklch,var(--color-base-200)_95%,transparent)]`,style:{background:`color-mix(in oklch, var(--color-base-200) 80%, transparent)`,border:`1px solid
        color-mix(in oklch, var(--color-secondary) 30%, transparent)`,"box-shadow":`0 2px 8px
        color-mix(in oklch, var(--color-base-content) 5%, transparent)`}},Bt=k({__name:`Collapse`,props:{isOpen:{type:Boolean,default:!1}},emits:[`collapse`],setup(e,{emit:t}){let n=t,r=F(),i=s(()=>r.proxiesDisplayMode===N.LIST);return(t,r)=>(w(),g(`div`,zt,[D(`div`,{class:`flex cursor-pointer items-center justify-between p-4 pr-3 text-xl font-medium text-[var(--color-base-content)]`,onClick:r[0]||=t=>n(`collapse`,!e.isOpen)},[y(t.$slots,`title`),D(`div`,{class:C([`flex h-6 w-6 items-center justify-center text-[color-mix(in_oklch,var(--color-base-content)_50%,transparent)] transition-transform duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]`,e.isOpen?`rotate-180`:``])},[...r[1]||=[D(`svg`,{class:`h-4 w-4`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[D(`path`,{d:`m6 9 6 6 6-6`})],-1)]],2)]),D(`div`,{class:C([`gap-3 px-4 pt-2 pb-4 transition-opacity duration-300 ease-out`,[e.isOpen?`opacity-100`:`hidden opacity-0`,l(i)?`flex flex-col`:`grid grid-cols-[repeat(auto-fill,minmax(180px,1fr))]`]])},[e.isOpen?y(t.$slots,`default`,{key:0}):_(``,!0)],2)]))}}),Vt=Object.assign(Bt,{__name:`Collapse`}),Ht={key:0,class:`flex gap-2`},Ut={class:`isolate flex flex-1 flex-col gap-2`},Wt={class:`isolate flex flex-1 flex-col gap-2`},Gt={key:1,class:`isolate flex flex-col gap-2`},Kt=k({__name:`ProxiesRenderWrapper`,setup(e,{expose:n}){let r=F(),{width:i}=t(),a=s(()=>i.value>480),o=s(()=>r.renderProxiesInTwoColumns&&a.value);return n({isTwoColumns:o}),(e,t)=>l(o)?(w(),g(`div`,Ht,[D(`div`,Ut,[y(e.$slots,`even`)]),D(`div`,Wt,[y(e.$slots,`odd`)])])):(w(),g(`div`,Gt,[y(e.$slots,`default`)]))}}),qt=Object.assign(Kt,{__name:`ProxiesRenderWrapper`}),Jt=10,Yt=200;function Xt(){let e=F(),t=ye(),n=j(!1),r=j({completed:0,total:0,current:``}),i=j(null),a=async(e,t,n)=>{try{return{proxyName:e,delay:(await G().get(`proxies/${encodeURIComponent(e)}/delay`,{searchParams:{url:t,timeout:n}}).json()).delay}}catch{return{proxyName:e,delay:0}}},o=async(e,t,n)=>{try{return await G().get(`group/${encodeURIComponent(e)}/delay`,{searchParams:{url:t,timeout:n}}).json()}catch{return{}}},s=async(e,o)=>{let{url:s,timeout:c,onProgress:l,onNodeComplete:u}=o,d={};n.value=!0,r.value={completed:0,total:e.length,current:``},i.value=new AbortController,t.batchTestProgress={total:e.length,completed:0,current:null,isRunning:!0};try{for(let n=0;n<e.length&&!i.value?.signal.aborted;n+=Jt){let o=e.slice(n,n+Jt).map(async n=>{r.value.current=n,t.batchTestProgress.current=n;let i=await a(n,s,c);return d[n]=i.delay,r.value.completed++,t.batchTestProgress.completed++,l?.(r.value.completed,e.length,n),u?.(n,i.delay),t.recordTestResult(n,i.delay>0?i.delay:null,i.delay>0),i});await Promise.all(o),n+Jt<e.length&&!i.value?.signal.aborted&&await new Promise(e=>setTimeout(e,Yt))}}finally{n.value=!1,r.value.current=``,t.batchTestProgress={total:e.length,completed:r.value.completed,current:null,isRunning:!1},i.value=null}return d},c=async(r,i)=>{let a=i?.url??e.urlForLatencyTest,s=i?.timeout??e.latencyTestTimeoutDuration;n.value=!0,t.batchTestProgress={total:1,completed:0,current:r,isRunning:!0};try{let e=await o(r,a,s);return t.recordBatchResults(e),e}finally{n.value=!1,t.batchTestProgress={total:1,completed:1,current:null,isRunning:!1}}};return{isRunning:n,progress:r,batchTestNodes:s,testGroupNodes:c,testMultipleGroups:async(e,r)=>{let i={};n.value=!0,t.batchTestProgress={total:e.length,completed:0,current:null,isRunning:!0};try{for(let n=0;n<e.length;n++){let a=e[n];a&&(t.batchTestProgress.current=a,t.batchTestProgress.completed=n,i[a]=await c(a,r),n<e.length-1&&await new Promise(e=>setTimeout(e,Yt)))}}finally{n.value=!1,t.batchTestProgress={total:e.length,completed:e.length,current:null,isRunning:!1}}return i},abortTest:()=>{i.value?.abort()}}}var Zt={class:`flex h-full flex-col gap-3 overflow-y-auto p-2`},Qt={class:`animate-fade-slide-in flex flex-wrap items-center gap-3`},$t={class:`flex gap-1 rounded-xl border border-base-content/8 bg-base-200/60 p-1 backdrop-blur-sm`},en=[`onClick`],tn={class:`font-medium`},nn={class:`flex items-center gap-2`},rn={class:`hidden text-sm font-medium sm:inline`},an={key:1,class:`flex items-center gap-2 rounded-lg bg-success/10 px-3 py-1.5 text-sm text-success`},on={key:0,class:`max-w-24 truncate text-xs opacity-70`},sn={class:`ml-auto`},cn={key:0,class:`flex-1 overflow-y-auto`},ln={key:1,class:`flex-1 overflow-y-auto`},un={class:`flex flex-col gap-4`},dn={class:`flex w-full justify-center`},fn={class:`flex flex-col`},pn={value:`orderNatural`},mn={value:`orderLatency_asc`},hn={value:`orderLatency_desc`},gn={value:`orderName_asc`},_n={value:`orderName_desc`},vn={class:`flex w-full justify-center`},yn={class:`flex w-full justify-center`},bn={value:`cardMode`},xn={value:`listMode`},Sn={value:`auto`},Cn={value:`dots`},wn={value:`bar`},Tn={value:`off`},En=W(k({__name:`proxies`,setup(t){let{t:i,locale:a}=ee();c({title:s(()=>i(`proxies`))});let u=$(),d=le(),f=F(),p=ye(),{isRunning:y,testMultipleGroups:N}=Xt(),P=j(`proxies`),te=j(),I=j(),L=j(),ne=e=>ue(e).toString(),R=e=>it(e.all??[],p.performanceData,p.excludedNodes,p.scoringWeights),re=async()=>{await N(U.value.map(e=>e.name))},ae=e=>{let t=R(e);t&&u.selectProxyInGroup(e,t)},U=s(()=>u.proxies.filter(e=>!e.hidden)),W=s(()=>[{type:`proxies`,name:i(`proxies`),count:U.value.length},{type:`proxyProviders`,name:i(`proxyProviders`),count:u.proxyProviders.length}]);function G(e){return me({proxyNames:fe({proxyNames:e.all??[],orderingType:f.proxiesOrderingType,testUrl:e.testUrl||null,getLatencyByName:u.getLatencyByName,latencyQualityMap:f.latencyQualityMap,urlForLatencyTest:f.urlForLatencyTest}),enabled:f.hideUnAvailableProxies,testUrl:e.testUrl||null,getLatencyByName:u.getLatencyByName,isProxyGroup:u.isProxyGroup,latencyQualityMap:f.latencyQualityMap,urlForLatencyTest:f.urlForLatencyTest})}function K(e){return fe({proxyNames:e.proxies.map(e=>e.name),orderingType:f.proxiesOrderingType,testUrl:e.testUrl,getLatencyByName:u.getLatencyByName,latencyQualityMap:f.latencyQualityMap,urlForLatencyTest:f.urlForLatencyTest})}O(()=>{u.fetchProxies()});let q=k({props:{proxyGroup:{type:Object,required:!0},sortedProxyNames:{type:Array,required:!0}},setup(e){let t=s(()=>R(e.proxyGroup)),n=s(()=>t.value!==null&&t.value!==e.proxyGroup.now);return()=>E(`div`,{class:`flex flex-col gap-3 flex-1 min-w-0`},[E(`div`,{class:`flex items-center justify-between gap-2 w-full flex-nowrap`},[E(`div`,{class:`flex flex-wrap items-center gap-2 flex-1 min-w-0`},[e.proxyGroup.icon&&(e.proxyGroup.icon.startsWith(`data:image/svg+xml`)?E(`div`,{style:{height:`${f.iconHeight}px`,width:`${f.iconHeight}px`,color:`oklch(var(--p) / var(--tw-bg-opacity))`,backgroundColor:`currentColor`,marginRight:`${f.iconMarginRight}px`,maskImage:`url('${_e(e.proxyGroup.icon)}')`,maskSize:`100% 100%`}}):E(`img`,{src:e.proxyGroup.icon,style:{height:`${f.iconHeight}px`,marginRight:`${f.iconMarginRight}px`}})),E(`span`,{class:`text-lg font-semibold tracking-tight line-clamp-1 break-all bg-gradient-to-br from-base-content to-base-content/70 bg-clip-text text-transparent`},e.proxyGroup.name),E(`div`,{class:`badge badge-sm text-[0.7rem] font-semibold px-2 py-1 rounded-md bg-primary/12 text-primary border border-primary/20`},e.proxyGroup.all?.length)]),E(`div`,{class:`flex items-center gap-1.5 shrink-0`},[n.value&&E(Q,{class:`flex items-center justify-center w-9 h-9 rounded-lg bg-warning/10 border border-warning/20 text-warning transition-all duration-200 hover:bg-warning/20 hover:border-warning/40 hover:-translate-y-px hover:shadow-lg hover:shadow-warning/15 active:translate-y-0`,title:i(`recommendation.switchToRecommended`,`Switch to Recommended: `)+t.value,onClick:t=>{t.stopPropagation(),ae(e.proxyGroup)}},{default:()=>E(H,{size:18})}),E(Q,{class:`flex items-center justify-center w-9 h-9 rounded-lg bg-base-content/6 border border-base-content/8 text-base-content/60 transition-all duration-200 hover:bg-primary/15 hover:border-primary/30 hover:text-primary hover:-translate-y-px hover:shadow-lg hover:shadow-primary/15 active:translate-y-0 disabled:bg-success/15 disabled:border-success/30 disabled:cursor-not-allowed disabled:opacity-100`,disabled:u.proxyGroupLatencyTestingMap[e.proxyGroup.name],onClick:t=>{t.stopPropagation(),u.proxyGroupLatencyTest(e.proxyGroup.name)}},{default:()=>E(z,{size:18,class:{"animate-pulse text-success":u.proxyGroupLatencyTestingMap[e.proxyGroup.name]}})})])]),E(`div`,{class:`flex flex-col gap-2.5 pt-1`},[E(`div`,{class:`badge badge-primary badge-sm inline-flex items-center gap-1`},[E(`span`,{class:`font-bold`},ge(e.proxyGroup.type,i)),e.proxyGroup.now?.length>0&&[E(ie,{size:18}),E(`span`,{class:`whitespace-nowrap`},e.proxyGroup.now)]]),E(`div`,{class:`badge badge-secondary badge-sm`},`${ne(d.speedGroupByName[e.proxyGroup.name]||0)}/s`)]),!u.collapsedMap[e.proxyGroup.name]&&E(Fe,{proxyNameList:e.sortedProxyNames,now:e.proxyGroup.now,testUrl:e.proxyGroup.testUrl||null,onSelect:t=>u.selectProxyInGroup(e.proxyGroup,t)})])}}),J=k({props:{proxyGroup:{type:Object,required:!0},sortedProxyNames:{type:Array,required:!0}},setup(e){let t=s(()=>R(e.proxyGroup));return()=>e.sortedProxyNames.map(n=>f.proxiesDisplayMode===`listMode`?E(Ye,{key:n,proxyName:n,testUrl:e.proxyGroup.testUrl||null,timeout:e.proxyGroup.timeout??null,isSelected:e.proxyGroup.now===n,onClick:()=>u.selectProxyInGroup(e.proxyGroup,n)}):E(kt,{key:n,proxyName:n,testUrl:e.proxyGroup.testUrl||null,timeout:e.proxyGroup.timeout??null,isSelected:e.proxyGroup.now===n,isRecommended:t.value===n,groupName:e.proxyGroup.name,onClick:()=>u.selectProxyInGroup(e.proxyGroup,n)}))}}),Y=k({props:{provider:{type:Object,required:!0},sortedProxyNames:{type:Array,required:!0}},setup(e){return()=>E(`div`,{class:`flex flex-col gap-3 flex-1 min-w-0`},[E(`div`,{class:`flex items-center justify-between gap-2 w-full flex-nowrap`},[E(`div`,{class:`flex flex-wrap items-center gap-2 flex-1 min-w-0`},[E(`span`,{class:`text-lg font-semibold tracking-tight line-clamp-1 break-all bg-gradient-to-br from-base-content to-base-content/70 bg-clip-text text-transparent`},e.provider.name),E(`div`,{class:`badge badge-sm text-[0.7rem] font-semibold px-2 py-1 rounded-md bg-primary/12 text-primary border border-primary/20`},e.provider.proxies.length),E(`div`,{class:`badge badge-sm text-[0.7rem] font-semibold px-2 py-1 rounded-md bg-primary/12 text-primary border border-primary/20`},e.provider.vehicleType)]),E(`div`,{class:`flex items-center gap-1.5 shrink-0`},[E(Q,{class:`flex items-center justify-center w-9 h-9 rounded-lg bg-base-content/6 border border-base-content/8 text-base-content/60 transition-all duration-200 hover:bg-primary/15 hover:border-primary/30 hover:text-primary hover:-translate-y-px hover:shadow-lg hover:shadow-primary/15 active:translate-y-0 disabled:bg-success/15 disabled:border-success/30 disabled:cursor-not-allowed disabled:opacity-100`,disabled:u.updatingMap[e.provider.name],onClick:t=>{t.stopPropagation(),u.updateProviderByProviderName(e.provider.name)}},{default:()=>E(B,{size:18,class:{"animate-spin text-success":u.updatingMap[e.provider.name]}})}),E(Q,{class:`flex items-center justify-center w-9 h-9 rounded-lg bg-base-content/6 border border-base-content/8 text-base-content/60 transition-all duration-200 hover:bg-primary/15 hover:border-primary/30 hover:text-primary hover:-translate-y-px hover:shadow-lg hover:shadow-primary/15 active:translate-y-0 disabled:bg-success/15 disabled:border-success/30 disabled:cursor-not-allowed disabled:opacity-100`,disabled:u.proxyProviderLatencyTestingMap[e.provider.name],onClick:t=>{t.stopPropagation(),u.proxyProviderLatencyTest(e.provider.name)}},{default:()=>E(z,{size:18,class:{"animate-pulse text-success":u.proxyProviderLatencyTestingMap[e.provider.name]}})})])]),E(Rt,{subscriptionInfo:e.provider.subscriptionInfo}),E(`div`,{class:`flex flex-col gap-2.5 pt-1`},[E(`div`,{class:`inline-flex items-center gap-1.5 text-xs font-medium text-base-content/45 px-2.5 py-1 bg-base-content/5 rounded-full w-fit`},`${i(`updated`)} ${de(e.provider.updatedAt,a.value)}`),!u.collapsedMap[e.provider.name]&&E(Fe,{proxyNameList:e.sortedProxyNames,testUrl:e.provider.testUrl})])])}}),X=k({props:{provider:{type:Object,required:!0},sortedProxyNames:{type:Array,required:!0}},setup(e){return()=>e.sortedProxyNames.map(t=>f.proxiesDisplayMode===`listMode`?E(Ye,{key:t,proxyName:t,testUrl:e.provider.testUrl,timeout:e.provider.timeout??null,providerName:e.provider.name}):E(kt,{key:t,proxyName:t,testUrl:e.provider.testUrl,timeout:e.provider.timeout??null,providerName:e.provider.name}))}});return(t,a)=>{let s=Vt,c=qt,d=be,E=xe;return w(),g(`div`,Zt,[D(`div`,Qt,[D(`div`,$t,[(w(!0),g(h,null,A(l(W),e=>(w(),g(`button`,{key:e.type,class:C([`flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm text-base-content/70 transition-all duration-200 hover:bg-base-content/5`,{"bg-primary text-primary-content shadow-md shadow-primary/30 hover:bg-primary":l(P)===e.type}]),onClick:t=>P.value=e.type},[D(`span`,tn,S(e.name),1),D(`span`,{class:C([`rounded-md bg-base-content/10 px-1.5 py-0.5 text-xs font-semibold`,{"bg-primary-content/20":l(P)===e.type}])},S(e.count),3)],10,en))),128))]),D(`div`,nn,[l(P)===`proxies`?(w(),o(Q,{key:0,class:`flex h-9 items-center gap-1.5 rounded-[0.625rem] border border-base-content/10 bg-base-200/80 px-3 transition-all duration-200 hover:border-primary/30 hover:bg-primary/15 hover:text-primary`,disabled:l(y),title:l(i)(`recommendation.testAllGroups`,`Test All Groups`),onClick:re},{default:T(()=>[b(l(z),{size:18,class:C({"animate-pulse text-success":l(y)})},null,8,[`class`]),D(`span`,rn,S(l(i)(`recommendation.testAll`,`Test All`)),1)]),_:1},8,[`disabled`,`title`])):_(``,!0),l(y)?(w(),g(`div`,an,[a[12]||=D(`span`,{class:`loading loading-xs loading-spinner`},null,-1),D(`span`,null,S(l(p).batchTestProgress.completed)+`/`+S(l(p).batchTestProgress.total),1),l(p).batchTestProgress.current?(w(),g(`span`,on,S(l(p).batchTestProgress.current),1)):_(``,!0)])):_(``,!0),l(P)===`proxyProviders`?(w(),o(Q,{key:2,class:`flex h-9 w-9 items-center justify-center rounded-[0.625rem] border border-base-content/10 bg-base-200/80 transition-all duration-200 hover:border-primary/30 hover:bg-primary/15 hover:text-primary`,disabled:l(u).isAllProviderUpdating,onClick:l(u).updateAllProvider},{default:T(()=>[b(l(B),{size:18,class:C({"animate-spin text-success":l(u).isAllProviderUpdating})},null,8,[`class`])]),_:1},8,[`disabled`,`onClick`])):_(``,!0)]),D(`div`,sn,[b(Q,{class:`flex h-9 w-9 items-center justify-center rounded-[0.625rem] border border-base-content/10 bg-primary/10 text-primary transition-all duration-200 hover:border-primary/30 hover:bg-primary/15`,onClick:a[0]||=e=>l(te)?.open()},{default:T(()=>[b(l(oe),{size:18})]),_:1})])]),l(P)===`proxies`?(w(),g(`div`,cn,[b(c,{ref_key:`proxyGroupsWrapper`,ref:I},v({_:2},[l(I)?.isTwoColumns?{name:`even`,fn:T(()=>[(w(!0),g(h,null,A(l(U).filter((e,t)=>t%2==0),(e,t)=>(w(),o(s,{key:e.name,class:`animate-fade-slide-in`,style:n({animationDelay:`${t*50}ms`}),"is-open":l(u).collapsedMap[e.name]||!1,onCollapse:t=>l(u).collapsedMap[e.name]=t},{title:T(()=>[b(l(q),{"proxy-group":e,"sorted-proxy-names":G(e)},null,8,[`proxy-group`,`sorted-proxy-names`])]),default:T(()=>[b(l(J),{"proxy-group":e,"sorted-proxy-names":G(e)},null,8,[`proxy-group`,`sorted-proxy-names`])]),_:2},1032,[`style`,`is-open`,`onCollapse`]))),128))]),key:`0`}:void 0,l(I)?.isTwoColumns?{name:`odd`,fn:T(()=>[(w(!0),g(h,null,A(l(U).filter((e,t)=>t%2==1),(e,t)=>(w(),o(s,{key:e.name,class:`animate-fade-slide-in`,style:n({animationDelay:`${t*50+25}ms`}),"is-open":l(u).collapsedMap[e.name]||!1,onCollapse:t=>l(u).collapsedMap[e.name]=t},{title:T(()=>[b(l(q),{"proxy-group":e,"sorted-proxy-names":G(e)},null,8,[`proxy-group`,`sorted-proxy-names`])]),default:T(()=>[b(l(J),{"proxy-group":e,"sorted-proxy-names":G(e)},null,8,[`proxy-group`,`sorted-proxy-names`])]),_:2},1032,[`style`,`is-open`,`onCollapse`]))),128))]),key:`1`}:void 0,l(I)?.isTwoColumns?void 0:{name:`default`,fn:T(()=>[(w(!0),g(h,null,A(l(U),(e,t)=>(w(),o(s,{key:e.name,class:`animate-fade-slide-in`,style:n({animationDelay:`${t*40}ms`}),"is-open":l(u).collapsedMap[e.name]||!1,onCollapse:t=>l(u).collapsedMap[e.name]=t},{title:T(()=>[b(l(q),{"proxy-group":e,"sorted-proxy-names":G(e)},null,8,[`proxy-group`,`sorted-proxy-names`])]),default:T(()=>[b(l(J),{"proxy-group":e,"sorted-proxy-names":G(e)},null,8,[`proxy-group`,`sorted-proxy-names`])]),_:2},1032,[`style`,`is-open`,`onCollapse`]))),128))]),key:`2`}]),1536)])):(w(),g(`div`,ln,[b(c,{ref_key:`providersWrapper`,ref:L},v({_:2},[l(L)?.isTwoColumns?{name:`even`,fn:T(()=>[(w(!0),g(h,null,A(l(u).proxyProviders.filter((e,t)=>t%2==0),(e,t)=>(w(),o(s,{key:e.name,class:`animate-fade-slide-in`,style:n({animationDelay:`${t*50}ms`}),"is-open":l(u).collapsedMap[e.name]||!1,onCollapse:t=>l(u).collapsedMap[e.name]=t},{title:T(()=>[b(l(Y),{provider:e,"sorted-proxy-names":K(e)},null,8,[`provider`,`sorted-proxy-names`])]),default:T(()=>[b(l(X),{provider:e,"sorted-proxy-names":K(e)},null,8,[`provider`,`sorted-proxy-names`])]),_:2},1032,[`style`,`is-open`,`onCollapse`]))),128))]),key:`0`}:void 0,l(L)?.isTwoColumns?{name:`odd`,fn:T(()=>[(w(!0),g(h,null,A(l(u).proxyProviders.filter((e,t)=>t%2==1),(e,t)=>(w(),o(s,{key:e.name,class:`animate-fade-slide-in`,style:n({animationDelay:`${t*50+25}ms`}),"is-open":l(u).collapsedMap[e.name]||!1,onCollapse:t=>l(u).collapsedMap[e.name]=t},{title:T(()=>[b(l(Y),{provider:e,"sorted-proxy-names":K(e)},null,8,[`provider`,`sorted-proxy-names`])]),default:T(()=>[b(l(X),{provider:e,"sorted-proxy-names":K(e)},null,8,[`provider`,`sorted-proxy-names`])]),_:2},1032,[`style`,`is-open`,`onCollapse`]))),128))]),key:`1`}:void 0,l(L)?.isTwoColumns?void 0:{name:`default`,fn:T(()=>[(w(!0),g(h,null,A(l(u).proxyProviders,(e,t)=>(w(),o(s,{key:e.name,class:`animate-fade-slide-in`,style:n({animationDelay:`${t*40}ms`}),"is-open":l(u).collapsedMap[e.name]||!1,onCollapse:t=>l(u).collapsedMap[e.name]=t},{title:T(()=>[b(l(Y),{provider:e,"sorted-proxy-names":K(e)},null,8,[`provider`,`sorted-proxy-names`])]),default:T(()=>[b(l(X),{provider:e,"sorted-proxy-names":K(e)},null,8,[`provider`,`sorted-proxy-names`])]),_:2},1032,[`style`,`is-open`,`onCollapse`]))),128))]),key:`2`}]),1536)])),b(E,{ref_key:`settingsModal`,ref:te,title:l(i)(`proxiesSettings`)},{icon:T(()=>[b(l(V),{size:24})]),default:T(()=>[D(`div`,un,[D(`div`,null,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`autoCloseConns`)),1)]),_:1}),D(`div`,dn,[x(D(`input`,{"onUpdate:modelValue":a[1]||=e=>l(f).autoCloseConns=e,class:`toggle toggle-primary`,type:`checkbox`},null,512),[[M,l(f).autoCloseConns]])])]),D(`div`,fn,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`urlForLatencyTest`)),1)]),_:1}),x(D(`input`,{"onUpdate:modelValue":a[2]||=e=>l(f).urlForLatencyTest=e,class:`input-bordered input w-full`,type:`text`},null,512),[[m,l(f).urlForLatencyTest]])]),D(`div`,null,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`latencyTestTimeoutDuration`))+` (`+S(l(i)(`ms`))+`) `,1)]),_:1}),x(D(`input`,{"onUpdate:modelValue":a[3]||=e=>l(f).latencyTestTimeoutDuration=e,class:`input-bordered input w-full`,type:`number`},null,512),[[m,l(f).latencyTestTimeoutDuration,void 0,{number:!0}]])]),D(`div`,null,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`proxiesSorting`)),1)]),_:1}),x(D(`select`,{"onUpdate:modelValue":a[4]||=e=>l(f).proxiesOrderingType=e,class:`select-bordered select w-full`},[D(`option`,pn,S(l(i)(`orderNatural`)),1),D(`option`,mn,S(l(i)(`orderLatency_asc`)),1),D(`option`,hn,S(l(i)(`orderLatency_desc`)),1),D(`option`,gn,S(l(i)(`orderName_asc`)),1),D(`option`,_n,S(l(i)(`orderName_desc`)),1)],512),[[r,l(f).proxiesOrderingType]])]),D(`div`,null,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`hideUnavailableProxies`)),1)]),_:1}),D(`div`,vn,[x(D(`input`,{"onUpdate:modelValue":a[5]||=e=>l(f).hideUnAvailableProxies=e,class:`toggle toggle-primary`,type:`checkbox`},null,512),[[M,l(f).hideUnAvailableProxies]])])]),D(`div`,null,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`renderInTwoColumns`)),1)]),_:1}),D(`div`,yn,[x(D(`input`,{"onUpdate:modelValue":a[6]||=e=>l(f).renderProxiesInTwoColumns=e,class:`toggle toggle-primary`,type:`checkbox`},null,512),[[M,l(f).renderProxiesInTwoColumns]])])]),D(`div`,null,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`proxiesDisplayMode`)),1)]),_:1}),x(D(`select`,{"onUpdate:modelValue":a[7]||=e=>l(f).proxiesDisplayMode=e,class:`select-bordered select w-full`},[D(`option`,bn,S(l(i)(`cardMode`)),1),D(`option`,xn,S(l(i)(`listMode`)),1)],512),[[r,l(f).proxiesDisplayMode]])]),D(`div`,null,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`proxiesPreviewType`)),1)]),_:1}),x(D(`select`,{"onUpdate:modelValue":a[8]||=e=>l(f).proxiesPreviewType=e,class:`select-bordered select w-full`},[D(`option`,Sn,S(l(i)(`auto`)),1),D(`option`,Cn,S(l(i)(`dots`)),1),D(`option`,wn,S(l(i)(`bar`)),1),D(`option`,Tn,S(l(i)(`off`)),1)],512),[[r,l(f).proxiesPreviewType]])]),D(`div`,null,[b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`iconHeight`)),1)]),_:1}),x(D(`input`,{"onUpdate:modelValue":a[9]||=e=>l(f).iconHeight=e,class:`input-bordered input w-full`,type:`number`},null,512),[[m,l(f).iconHeight,void 0,{number:!0}]]),b(d,{"with-divider":``},{default:T(()=>[e(S(l(i)(`iconMarginRight`)),1)]),_:1}),x(D(`input`,{"onUpdate:modelValue":a[10]||=e=>l(f).iconMarginRight=e,class:`input-bordered input w-full`,type:`number`},null,512),[[m,l(f).iconMarginRight,void 0,{number:!0}]])]),D(`div`,null,[D(`button`,{class:`btn w-full btn-error`,onClick:a[11]||=e=>l(f).resetProxiesSettings()},S(l(i)(`resetSettings`)),1)])])]),_:1},8,[`title`])])}}}),[[`__scopeId`,`data-v-744daf9a`]]);export{En as default};